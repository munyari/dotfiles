#!/bin/bash
# No arguments: `git status`
# With arguments: acts like `git`
function g() {
  if [[ $# > 0 ]]; then
    hub "$@"
  else
    hub status --short --branch
  fi
}

# edit aliases defined for this shell
function al() {
  alias_file=~/.aliases
  if [[ $# > 0 ]]; then
    if type $1 > /dev/null; then
      echo "Error: command" $1 "exists" 1>&2
      return 1
    else
      echo alias $1=\"$2\" >> "$alias_file"
    fi
  else
    nvim "$alias_file"
  fi
  source "$alias_file"
}

function md_to_pdf() {
  NEW_PDF="${1%.*}".pdf
  if pandoc -t latex -s $1 -o "$NEW_PDF"; then
    zathura "$NEW_PDF" &> /dev/null &
  else
    return 1
  fi
}

function em() {
  emacs $1 &> /dev/null &
}

function weather() {
  curl "http://wttr.in/$1?m"
}

function ssh-aws() {
  ssh -i ~/.ssh/mville.pem ubuntu@"$1"
}

function arc-diff() {
  mbzl test //metaserver/static/js:typecheck_with_tests && mbzl test //metaserver/static_tests:package_tests && arc diff "$@"
}

function bzl() {
  mbzl "$@"
}

function n() {
  if [[ "$OSTYPE" == "darwin"* ]]; then
    reattach-to-user-namespace -l nvim
  else
    nvim
  fi
}
